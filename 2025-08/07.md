# Today I Learned (2025-08-07)

이 저장소는 제가 매일 학습한 내용을 기록하고 정리하기 위해 만든 공간입니다.

---

## 📚 공부한 내용

**[개발] MSA 전환을 위한 멀티모듈 구조와 Gradle 설정**

### ✅ 전환 배경

- 스프링 게이트웨이를 도입하며 서비스 분리를 시작하게 되었고, **멀티모듈 구조**가 필요하다고 판단.
- 인증, 인가, 로깅 등 **횡단 관심사**는 게이트웨이로 옮기고, 각 서비스는 심플하게 유지.
- 실무에서는 팀 단위 도메인 운영이 필요할 때 멀티모듈로 전환하는 시점을 고민.

### 🧠 멀티모듈 도입 이유

- 하나의 메인 프로젝트 아래 여러 하위 모듈(submodules)로 구성해 기능별 코드 분리.
- `application.yml`, DB 설정 등도 각 모듈마다 분리 가능.
- MSA의 모듈성과 API 경계를 Gradle 수준에서 표현 가능.

### 📦 Gradle 설정 예시

**settings.gradle.kts**

```kotlin
rootProject.name = "my-msa-project"

include("common")
include("user-service")
include("order-service")
include("product-service")
```

**build.gradle.kts (root)**

```kotlin
plugins {
    java
    id("org.springframework.boot") version "3.2.0" apply false
    id("io.spring.dependency-management") version "1.1.4" apply false
    kotlin("jvm") version "1.9.10" apply false
    kotlin("plugin.spring") version "1.9.10" apply false
}

allprojects {
    group = "com.example"
    version = "0.0.1-SNAPSHOT"

    repositories {
        mavenCentral()
    }
}

subprojects {
    apply(plugin = "java")

    dependencies {
        // 공통 의존성 예시
        testImplementation("org.junit.jupiter:junit-jupiter")
    }

    tasks.test {
        useJUnitPlatform()
    }
}
```

- **settings.gradle**: 하위 모듈 포함 선언 (`common`, `user-service`, `order-service`, `product-service`)
- **apply false**: 루트에서는 플러그인만 선언하고, 각 모듈에서 개별 적용.
- **subprojects**: 공통 의존성, 공통 테스트 플랫폼 지정.

### 🏗️ 구조적 이점

- REST/Feign/MQ 통신으로 **도메인 간 강결합 최소화**.
- **독립 배포 및 확장 가능**: 특정 도메인만 스케일 아웃.
- 장애 격리 가능 (서킷 브레이커 등).
- **기술 스택 다양성** 허용, **팀 단위 개발/테스트** 용이.

### 🧩 MSA 철학 요약

- **느슨한 결합**을 통해 유연한 변경/배포/장애 대응.
- **중복 코드/횡단 관심사**는 Gateway에서 통합 처리.
- 각 모듈이 완전히 **독립적으로 배포** 가능해야 진정한 MSA.

### 🛠️ 명령어 예시

```bash
# 전체 빌드
./gradlew build

# 특정 모듈만 실행
./gradlew :user-service:bootRun
```

---

## 🔗 참고

- [Spring Cloud Gateway](https://spring.io/projects/spring-cloud-gateway)

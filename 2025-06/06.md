# Today I Learned  
# 2025-06-06  

## π“ κ³µλ¶€ν• λ‚΄μ©  
- `Optional`μ λ„μ… λ°°κ²½κ³Ό μ•μ „ν• κ°μ²΄ μ²λ¦¬  
- `λλ‹¤μ‹`, `ν•¨μν• μΈν„°νμ΄μ¤`, `Stream`μ ν™μ©  
- `Parallel Array Sorting`μΌλ΅ λ³‘λ ¬ μ •λ ¬ μµμ ν™”  

## π’΅ μ£Όμ” κ°λ…λ“¤  

---

### 1. Optionalμ λ“±μ¥  

#### π€ λ„μ… λ°°κ²½  
- μλ°”μ—μ„ `null` μ²λ¦¬λ” κ°€μ¥ ν”ν• μμ™Έ λ°μƒ μ›μΈ (`NullPointerException`)
- κ°’μ΄ μμ„ μλ„ μ—†μ„ μλ„ μλ” μƒν™©μ„ λ…μ‹μ μΌλ΅ ν‘ν„ β†’ μ•μ •μ„± ν™•λ³΄

#### κµ¬μ΅° λ° μƒμ„±  
```java
Optional<String> opt1 = Optional.of("value");         // κ°’μ΄ λ°λ“μ‹ μμ–΄μ•Ό ν•¨
Optional<String> opt2 = Optional.ofNullable(null);    // nullμΌ μ μμ
Optional<String> opt3 = Optional.empty();             // λΉ Optional
```

- μ§μ ‘ μƒμ„± λ¶κ°€λ¥: μƒμ„±μ `private` β†’ λ¶λ³€ κ°μ²΄ λ³΄μ¥
- ν©ν† λ¦¬ λ©”μ„λ“ μ‚¬μ© κ¶μ¥ (`of`, `ofNullable`, `empty`)

#### μ‚¬μ© μμ‹  
```java
Optional<User> userOpt = userRepository.findByEmail(email);
userOpt.ifPresent(user -> emailService.sendWelcome(user));
```

#### κ°’ μ¶”μ¶ λ°©λ²•  
- `get()` β†’ κ°’ μ—†μΌλ©΄ μμ™Έ λ°μƒ  
- `orElse()` / `orElseGet()` / `orElseThrow()`  

```java
String name = optional.orElse("default");
String name = optional.orElseGet(() -> "default");
String name = optional.orElseThrow(() -> new RuntimeException("No value"));
```

#### β… μ¥μ   
- λ…μ‹μ  null μ²λ¦¬ β†’ μ•μ •μ„±  
- API λ…ν™•ν™”  
- λλ‹¤/Streamκ³Ό μ μ–΄μΈλ¦Ό

#### β οΈ λ‹¨μ   
- λ¶ν•„μ”ν• λ°•μ‹±/μ–Έλ°•μ‹± β†’ μ„±λ¥ λ¬Έμ   
- ν•„λ“ λ©¤λ²„λ΅ μ‚¬μ©μ€ μ§€μ–‘  
- Optional μ•μ— κ°€λ³€ κ°μ²΄κ°€ λ“¤μ–΄κ°€λ©΄ λ©€ν‹°μ“°λ λ“ μ•μ „μ„± κΉ¨μ§ μ μμ

---

### 2. λλ‹¤μ‹

#### κ°λ…  
- μµλ… ν΄λμ¤μ κ°„κ²°ν• ν‘ν„  
- ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” λ¬Έλ²•

```java
Runnable r = () -> System.out.println("Hello");
list.forEach(System.out::println);
```

#### λ‚΄λ¶€ κµ¬μ΅°  
- `invokedynamic` + `LambdaMetafactory`  
- ν΄λμ¤ μλ¥Ό μ¤„μ—¬ μ„±λ¥ μµμ ν™” κ°€λ¥

#### λ””μ»΄νμΌ μμ‹  
```java
0: invokedynamic #2 run()Ljava/lang/Runnable;
```

---

### 3. ν•¨μν• μΈν„°νμ΄μ¤

#### κ°λ…  
- ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ§ κ°€μ§„ μΈν„°νμ΄μ¤  
- `@FunctionalInterface` μ–΄λ…Έν…μ΄μ… μ‚¬μ©

```java
@FunctionalInterface
interface MyFunction {
    void doSomething();
}
```

#### ν‘μ¤€ ν•¨μν• μΈν„°νμ΄μ¤ μμ‹  
```java
Consumer<String> c = s -> System.out.println(s);
Supplier<String> s = () -> "value";
Function<String, Integer> f = str -> str.length();
Predicate<String> p = str -> str.startsWith("A");
```

---

### 4. Stream API

#### κΈ°μ΅΄ μ½”λ“  
```java
for (String name : names) {
    if (name.startsWith("A")) {
        filtered.add(name.toUpperCase());
    }
}
```

#### Stream λ³€ν™ μμ‹  
```java
List<String> result = names.stream()
    .filter(s -> s.startsWith("A"))
    .map(String::toUpperCase)
    .sorted()
    .collect(Collectors.toList());
```

#### κµ¬μ„± μ”μ†  

| μ”μ† | μ„¤λ… | μμ‹ |
|------|------|------|
| Source | λ°μ΄ν„°μ μ¶μ² | list.stream() |
| Intermediate | μ¤‘κ°„ μ²λ¦¬ | filter(), map() |
| Terminal | μµμΆ… μ²λ¦¬ | collect(), forEach() |

#### β… μ¥μ   
- μ„ μ–Έν• ν”„λ΅κ·Έλλ° β†’ κ°€λ…μ„±  
- λ©”μ„λ“ μ²΄μ΄λ‹, λ³‘λ ¬ μ²λ¦¬ μ©μ΄

#### β οΈ μ£Όμ  
- μμ„ λ³΄μ¥ μ•λ¨ (parallelStream)  
- μ—°μ‚° λΉ„μ© μ μ„ λ• μΌλ° forλ¬Έμ΄ λ” λΉ λ¦„  
- primitive νƒ€μ…μ€ `IntStream`, `LongStream` μ‚¬μ©

---

### 5. Parallel Array Sorting (Fork-Join)

#### λΉ„κµ μμ‹  
```java
Arrays.sort(myArray);         // μμ°¨ μ •λ ¬
Arrays.parallelSort(myArray); // λ³‘λ ¬ μ •λ ¬
```

#### ν…μ¤νΈ κ²°κ³Ό  
- μ‘μ€ λ°°μ—΄: `sort()`κ°€ λΉ λ¦„  
- ν° λ°°μ—΄ (5,000 μ΄μƒ): `parallelSort()`κ°€ ν™•μ‹¤ν λΉ λ¦„  

#### λ‚΄λ¶€ κµ¬μ΅°  
- `ForkJoinPool` μ‚¬μ© β†’ CPU μ½”μ–΄ ν™μ©  
- λ‹¤λ§ λ³‘λ ¬ μ²λ¦¬λ” thread overheadκ°€ μ΅΄μ¬ν•λ―€λ΅ ν•­μƒ μ λ¦¬ν•μ§„ μ•μ  

---

## β… μ”μ•½  

| κΈ°μ  | λ©μ  | μ¥μ  | μ£Όμμ‚¬ν•­ |
|------|------|------|-----------|
| Optional | null μ•μ „μ„± | λ…μ‹μ  μ²λ¦¬ | λ‚΄λ¶€ κ°€λ³€ κ°μ²΄ μ£Όμ |
| Lambda | ν•¨μν• μ½”λ“ | μ½”λ“ κ°„κ²°ν™” | λ””λ²„κΉ… μ–΄λ ¤μ›€ |
| ν•¨μν• μΈν„°νμ΄μ¤ | λλ‹¤ κΈ°λ° | μ¶”μƒ λ©”μ„λ“ 1κ° λ³΄μ¥ | 2κ° μ΄μƒ λ¶κ°€ |
| Stream | μ„ μ–Έν• μ²λ¦¬ | κ°€λ…μ„±, λ³‘λ ¬μ„± | λ°•μ‹± λΉ„μ©, μμ„ μ—†μ |
| ParallelSort | κ³ μ† μ •λ ¬ | CPU ν™μ© μµμ ν™” | μ‘μ€ λ°μ΄ν„°μ—” λΉ„ν¨μ¨ |

---

## π”— μ°Έκ³   
- https://new-think-think.tistory.com/23  

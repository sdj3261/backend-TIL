# ğŸ“š 2025-06-24 Spring REST Docs

## ğŸ’¡ ê³µë¶€í•œ ë‚´ìš©
Spring REST Docs ì‚¬ìš©ë²•ê³¼ ë¬¸ì„œí™” íë¦„

## ğŸ§  ì£¼ìš” ê°œë…
- ì •í™•í•˜ê³  ì½ê¸° ì‰¬ìš´ REST API ë¬¸ì„œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ Spring REST Docsë¥¼ í™œìš©
- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ snippetì„ ìƒì„±í•˜ê³  Asciidoctorë¡œ HTML ë¬¸ì„œë¥¼ ìƒì„±
- Asciidoctor ë˜ëŠ” Markdownì„ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, ì¼ë°˜ì ìœ¼ë¡œ adoc ì‚¬ìš©

## âš™ï¸ ì„¤ì • ë° íë¦„

### ìµœì†Œ ìš”êµ¬ì‚¬í•­
- Java 17
- Spring Framework 6

### í…ŒìŠ¤íŠ¸ ì„¤ì • ì˜ˆì‹œ

```java
@SpringBootTest
@AutoConfigureMockMvc
@AutoConfigureRestDocs(outputDir = "build/generated-snippets")
public class UserApiDocsTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void documentUserApi() throws Exception {
        mockMvc.perform(get("/api/users/1"))
            .andExpect(status().isOk())
            .andDo(document("get-user"));
    }
}
```

### ë¬¸ì„œ ìŠ¤ë‹ˆí« ìƒì„±

```java
mockMvc.perform(get("/api/users/{id}", 1))
       .andExpect(status().isOk())
       .andDo(document("get-user",
            pathParameters(
                parameterWithName("id").description("ì‚¬ìš©ìì˜ ID")
            ),
            responseFields(
                fieldWithPath("id").description("ì‚¬ìš©ì ID"),
                fieldWithPath("name").description("ì‚¬ìš©ì ì´ë¦„")
            )
        ));
```

### ìƒì„±ëœ ìŠ¤ë‹ˆí« ì˜ˆì‹œ
- `http-request.adoc`
- `http-response.adoc`
- `curl-request.adoc`
- `response-fields.adoc`

## ğŸ›  Gradle ì„¤ì •

```kotlin
val snippetsDir by extra { file("build/generated-snippets") }

tasks.test {
    outputs.dir(snippetsDir)
}

plugins {
    id("org.asciidoctor.jvm.convert") version "4.0.2"
}

asciidoctor {
    inputs.dir(snippetsDir)
    dependsOn(test)
}
```

## ğŸ§¾ index.adoc ì˜ˆì‹œ

```adoc
= API ë¬¸ì„œ
:toc: left
:toclevels: 2

== ì‚¬ìš©ì ìƒì„± API

include::{snippets}/user-create/http-request.adoc[]
include::{snippets}/user-create/request-fields.adoc[]
include::{snippets}/user-create/http-response.adoc[]
include::{snippets}/user-create/response-fields.adoc[]
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì‹œ (JUnit5)

```java
@WebMvcTest(UserController.class)
@AutoConfigureRestDocs(outputDir = "build/generated-snippets")
class UserControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void createUser() throws Exception {
        String request = """
        {
          "email": "test@example.com",
          "password": "password123",
          "nickname": "tester"
        }
        """;

        mockMvc.perform(post("/api/users")
                .contentType(MediaType.APPLICATION_JSON)
                .content(request))
            .andExpect(status().isCreated())
            .andDo(document("user-create",
                requestFields(
                    fieldWithPath("email").description("ì´ë©”ì¼ ì£¼ì†Œ"),
                    fieldWithPath("password").description("ë¹„ë°€ë²ˆí˜¸"),
                    fieldWithPath("nickname").description("ë‹‰ë„¤ì„")
                ),
                responseFields(
                    fieldWithPath("id").description("ìƒì„±ëœ ìœ ì € ID"),
                    fieldWithPath("email").description("ì´ë©”ì¼")
                )
            ));
    }
}
```

## ğŸ”— ì°¸ê³ 
- ê³µì‹ ë¬¸ì„œ: https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/
- ë¸”ë¡œê·¸: https://new-think-think.tistory.com/37

---

title: "2025-07-17 TIL - Effective Java Item 78\~84"
date: 2025-07-17
category: TIL
tags: \[Java, Concurrency, Effective Java, Thread, Executor, Volatile]
----------------------------------------------------------------------

# Today I Learned

ì´ ì €ì¥ì†ŒëŠ” ì œê°€ ë§¤ì¼ í•™ìŠµí•œ ë‚´ìš©ì„ ê¸°ë¡í•˜ê³  ì •ë¦¬í•˜ê¸° ìœ„í•´ ë§Œë“  ê³µê°„ì…ë‹ˆë‹¤.
ê¸°ìˆ ì ì¸ ê°œë…, ì‹¤ìŠµí•˜ë©´ì„œ ë§ˆì£¼ì¹œ ë¬¸ì œë“¤, ì •ë¦¬í•˜ê³  ì‹¶ì€ ê°œë…ë“¤ì„ ì£¼ì œë³„/ì¼ìë³„ë¡œ êµ¬ì¡°í™”í•˜ì—¬ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## 2025-07-17

### ğŸ“š ê³µë¶€í•œ ë‚´ìš©: Effective Java Item 78\~84

---

### 78. ê³µìš© ê°ì²´ì—ì„œëŠ” ë™ê¸°í™”ì— ì£¼ì˜í•´ë¼

* ë§¤ìš° ê°œì–´í•˜ë©° ê°„ê°í•œ ì˜ˆì œë¡œ, `stopRequested` í‚¤ê°€ `true`ê°€ ë˜ì–´ë„ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ë°ìŠ¤ê°€ ë˜ì§€ ì•Šì•„ ë£¨í”„ë¥¼ ë¹ ì§€ì§€ ëª»í•œë‹¤.
* ê°’ì˜ ë³€ê²½ì´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì— ê±´ë„ˆì§„ë‹¤ëŠ” ê²ƒì„ ê°€ì‹œì„± (visibility)ì´ë¼ í•¨

```java
private static volatile boolean stopRequested = false;
```

* ê°ì²´ì— ìˆëŠ” í‚¤ê°€ ë³€ê²½ì´ ë  ê²½ìš°,

  * `volatile`ë¥¼ ì„¤ì •í•˜ë©´ í‚¤ ë³€ê²½ì´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ê²Œ ì‹¤ì œë¡œ ì „í™”ê°€ ëœë‹¤.

### 79. ê³¼ë„í•œ ë™ê¸°í™”ëŠ” í”¼í•´ë¼

* `synchronized` ì—­ì‹œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ê²°ê³¼ ë°˜ì˜ì´ ë“œë¬¸ì§€ì§€ ì•Šê²Œ ê°€ëŠ¥
* ì˜ˆ: ê·œì¹™ì„ ë°˜í™˜í•´ `observers` ë°°ì—´ì„ ë³µì‚¬í•´ì„œ í˜¸ì¶œ

### 80. Thread ë³´ë‹¤\uub294 Executor, Task, Streamì„ ì‚¬ìš©í•´ë¼

* ì§€ì ìœ¼ë¡œ `new Thread()` ì •ì˜ëŠ” ì œì–´ ë° ë¹„ìš© ë¬¸ì œ
* `ExecutorService`, `@Async`, `ThreadPoolTaskExecutor`ë¥¼ ì´ìš©í•´ ê³ ìˆ˜ì¤€ ìŠ¤ë§ì„ êµ¬í˜„í•˜ë¼

```java
ExecutorService executor = Executors.newFixedThreadPool(4);
executor.submit(() -> doSomething());
executor.shutdown();
```

### 81. wait/notify ë³´ë‹¤ ë™ì‹œì„± ìœ í‹¸ë¦¬í‹° í™œìš©

#### â†’ í…ŒìŠ¤íŠ¸ì™€ ìˆœì„œ ì œì–´ë¥¼ ìœ„í•´

* **CountDownLatch**: ì—¬ëŸ¬ ë³µì‚¬ ì‘ì—… ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
* **CyclicBarrier**: ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê°™ì´ ë°©í–¥ì— ë„ì°© í›„ ì°¨ì°¨ì´ ì§„í–‰
* **Semaphore**: ê°ì²´ê°€ ì œê³µí•˜ëŠ” ê°ì²´ê°€ ì¼ì • ê±´ìˆ˜ ì´ìƒ ë³´ì¡° ê°€ëŠ¥ (e.g., ë‹¤ìš´ë¡œë“œ 30ê°œ)
* **Phaser**: ë‹¤ë¥¸ ë‹¨ê³„ ë™ê¸°í™” ê°€ëŠ¥
* **BlockingQueue**: Kafka ê°™ì€ ì´ë²¤íŠ¸ ê´€ë¦¬ ê°€ëŠ¥. ê°ì²´ í¬ê¸°ì— ì˜í•´ OOM ì£¼ì˜

### 83. ì§€ì—° ì´ˆê¸°í™”ëŠ” ì •ì  í•„ë“œë³´ë‹¤ Holder í´ë˜ìŠ¤ ë°©ì‹ìœ¼ë¡œ

```java
public class LazySingleton {
    private LazySingleton() {}

    private static class Holder {
        private static final LazySingleton INSTANCE = new LazySingleton();
    }

    public static LazySingleton getInstance() {
        return Holder.INSTANCE;
    }
}
```

* ì •ì  í•„ë“œë³´ë‹¤ ì‹¤ì œ í•„ë“œ í•„ìš” ì‹œì ì— ì¡°ê±´ ì—†ì´ ì¡°ê±´ë³€ìˆ˜ê°€ ë˜ë©´ë³´ë‹¤ ì•ˆì •ì ì´ë©° ë°˜ë³µ ì‚¬ìš©ì´ ê°€ëŠ¥

---

### ğŸ”— ì°¸ê³ 

* Joshua Bloch, "Effective Java 3rd Edition"
* [https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html](https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)
* [https://techblog.yogiyo.co.kr/concurrency-in-java/](https://techblog.yogiyo.co.kr/concurrency-in-java/)

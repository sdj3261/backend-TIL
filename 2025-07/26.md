# Today I Learned (2025-07-26)

이 저장소는 제가 매일 학습한 내용을 기록하고 정리하기 위해 만든 공간입니다. 기술적인 개념, 실습하면서 마주친 문제들, 정리하고 싶은 개념들을 주제별/일자별로 구조화하여 관리하고 있습니다.

---

## 📚 공부한 내용
**[CS] MSA 분해 패턴**

### 마이크로서비스 분해 시 고려사항
- 각 서비스는 **독립적인 DB**를 가짐 → 느슨한 결합 & 빠른 배포.
- 하지만 분산 환경으로 인해 **데이터 일관성, 트랜잭션 관리, 통신** 문제가 발생.

### 통신 패턴 5가지
1. **통신 스타일:** 어떤 IPC(HTTP/gRPC/메시지큐)를 사용할 것인가?
2. **디스커버리:** 서비스 인스턴스 IP를 어떻게 가져올 것인가?
3. **신뢰성:** 서비스 장애 시 통신 안정성 확보 방법.
4. **트랜잭셔널 메시징:** DB 업데이트와 이벤트 발행을 통합 처리하는 방법.
5. **외부 API:** 클라이언트가 서비스와 통신하는 방식.

### 데이터 일관성 패턴
- **2PC (Two-Phase Commit):** 강한 일관성, 코디네이터가 트랜잭션을 조정.
- **Saga 패턴:** **최종적 일관성(Eventual Consistency)**
  - **Choreography:** 이벤트 주도, 각 서비스가 다음 이벤트 발행.
  - **Orchestration:** 중앙 코디네이터가 각 로컬 트랜잭션을 오케스트레이션.
  - **보상 트랜잭션**으로 실패 시 복구 (예: 결제 취소, 재고 복구).

### 데이터 쿼리 패턴
- 각 서비스 DB는 독립적 → **분산 Join 불가**.
- 해결책: 여러 API 호출로 데이터 조합 or **CQRS**로 조회 전용 복제본 사용.

### 배포 패턴
- WAR 수동 배포 → **컨테이너, 가상머신, 서버리스**로 자동화된 배포.
- 여러 서비스 **동시 배포**를 관리할 수 있는 플랫폼 필요.

### 관측성 패턴
- **중앙 로그 수집, 헬스체크, 트레이싱, 예외 보고** 필수.
- 분산 시스템의 동작 이해를 위한 모니터링 체계 구축.

### DevOps 4가지 핵심 지표
1. **배포 빈도**: 프로덕션 배포 주기.
2. **Lead Time**: 개발 → 배포까지 걸린 시간.
3. **MTTR**: 평균 복구 시간.
4. **변경 실패율**: 문제를 일으킨 변경 비율.

## 💡 주요 개념들
- MSA는 **빠른 배포, 독립적 확장성**이 강점이지만, **데이터 일관성과 복잡한 운영**이 도전 과제.
- **Saga**로 최종적 일관성을 확보하고 **CQRS**로 조회 성능을 보완.
- 관측성과 배포 자동화가 필수.

## 🔗 참고
- [Microservices Patterns by Chris Richardson](https://microservices.io/)
- 실습: Saga 패턴 및 CQRS 설계 예제

